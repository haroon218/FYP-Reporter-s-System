<div class="container mt-4">
  <h4 class="fw-bold">Add Company</h4>
  <p-toast></p-toast> <!-- PrimeNG Toast component for notifications -->

  <form [formGroup]="addCompanyForm" (ngSubmit)="onSubmit()">
    <div class="row mb-3">
      <!-- Group Dropdown (Moved to the first row) -->
      <div class="col-md-6 mb-3">
        <label for="group" class="form-label">Group Name</label>
        <select
          id="group"
          formControlName="group_id"
          class="form-control"
          [ngClass]="{'is-invalid': addCompanyForm.get('group_id')?.invalid && addCompanyForm.get('group_id')?.touched}"
        >
          <option value="" disabled selected>Select a group</option>
          <option *ngFor="let group of groups" [value]="group.id">{{ group.name }}</option>
        </select>
        <div *ngIf="addCompanyForm.get('group_id')?.invalid && addCompanyForm.get('group_id')?.touched" class="invalid-feedback">
          <small *ngIf="addCompanyForm.get('group_id')?.errors?.['required']">Group is required.</small>
        </div>
      </div>

      <div class="col-md-6 mb-3">
        <label for="name" class="form-label">Name</label>
        <input
          pInputText
          id="name"
          formControlName="name"
          class="form-control"
          placeholder="Enter name"
          [ngClass]="{'is-invalid': addCompanyForm.get('name')?.invalid && addCompanyForm.get('name')?.touched}"
        />
        <div *ngIf="addCompanyForm.get('name')?.invalid && addCompanyForm.get('name')?.touched" class="invalid-feedback">
          <small *ngIf="addCompanyForm.get('name')?.errors?.['required']">Name is required.</small>
        </div>
      </div>
    </div>

    <div class="row mb-3">
      <div class="col-md-6 mb-3">
        <label for="mobile" class="form-label">Mobile</label>
        <input
          pInputText
          id="mobile"
          formControlName="mobile"
          class="form-control"
          placeholder="Enter mobile number"
          [ngClass]="{'is-invalid': addCompanyForm.get('mobile')?.invalid && addCompanyForm.get('mobile')?.touched}"
        />
        <div *ngIf="addCompanyForm.get('mobile')?.invalid && addCompanyForm.get('mobile')?.touched" class="invalid-feedback">
          <small *ngIf="addCompanyForm.get('mobile')?.errors?.['required']">Mobile number is required.</small>
          <small *ngIf="addCompanyForm.get('mobile')?.errors?.['pattern']">Enter a valid 10-digit mobile number.</small>
        </div>
      </div>

      <div class="col-md-6 mb-3">
        <label for="email" class="form-label">Email</label>
        <input
          pInputText
          id="email"
          formControlName="email"
          class="form-control"
          placeholder="Enter email"
          [ngClass]="{'is-invalid': addCompanyForm.get('email')?.invalid && addCompanyForm.get('email')?.touched}"
        />
        <div *ngIf="addCompanyForm.get('email')?.invalid && addCompanyForm.get('email')?.touched" class="invalid-feedback">
          <small *ngIf="addCompanyForm.get('email')?.errors?.['required']">Email is required.</small>
          <small *ngIf="addCompanyForm.get('email')?.errors?.['email']">Enter a valid email address.</small>
        </div>
      </div>
    </div>

    <div class="row mb-3">
      <div class="col-md-6 mb-3">
        <label for="address" class="form-label">Address</label>
        <input
          pInputText
          id="address"
          formControlName="address"
          class="form-control"
          placeholder="Enter address"
          [ngClass]="{'is-invalid': addCompanyForm.get('address')?.invalid && addCompanyForm.get('address')?.touched}"
        />
        <div *ngIf="addCompanyForm.get('address')?.invalid && addCompanyForm.get('address')?.touched" class="invalid-feedback">
          <small *ngIf="addCompanyForm.get('address')?.errors?.['required']">Address is required.</small>
        </div>
      </div>
    </div>

    <div class="d-flex justify-content-end mt-4">
      <button pButton type="button" label="Cancel" class="p-button-secondary me-4"></button>
      <button pButton type="submit" label="Add Company" class="p-button-primary" [disabled]="addCompanyForm.invalid"></button>
    </div>
  </form>
</div>
